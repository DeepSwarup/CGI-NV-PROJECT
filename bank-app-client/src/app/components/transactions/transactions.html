<!-- outer page wrapper to give a subtle page background -->
    <!-- transactions card -->
    <div class="transactions-container mx-auto">
      <!-- card header -->
      <div class="card-header">
        <div>
          <h2 class="mb-1">Recent Transactions</h2>
          <p class="subtitle mb-0">A log of recent activity on this account</p>
        </div>
        <!-- <div class="actions">
          <a class="link" routerLink="/dashboard">Back</a>
        </div> -->
      </div>

      <!-- card body -->
      <div class="card-body">

        <!-- toolbar -->
        <div class="toolbar mb-2">
          <!-- search box -->
          <div class="search-box">
            <input
              type="text"
              class="form-control"
              placeholder="Search by Remarks or Transaction ID"
              [ngModel]="searchTerm()"
              (ngModelChange)="searchTerm.set($event)"
            />
          </div>

          <!-- filters -->
          <form [formGroup]="filterForm" class="filters d-flex align-items-center" (ngSubmit)="applyFilter()">
            <select class="form-select me-2" formControlName="type">
              <option value="ALL">All Types</option>
              <option value="DEPOSIT">Deposit</option>
              <option value="WITHDRAWAL">Withdrawal</option>
              <option value="TRANSFER">Transfer</option>
            </select>

            <select class="form-select me-2" formControlName="status">
              <option value="ALL">All Status</option>
              <option value="SUCCESS">Success</option>
              <option value="FAILED">Failed</option>
            </select>

            <div class="d-flex align-items-center me-2">
              <input type="date" class="form-control me-1" formControlName="from" />
              <span class="mx-1 text-muted">to</span>
              <input type="date" class="form-control ms-1" formControlName="to" />
            </div>

            <button type="submit" class="btn btn-primary me-2 btn-apply">Apply</button>
            <button type="button" class="btn btn-light btn-clear" (click)="clearFilters()">Clear</button>
          </form>
        </div>

        <!-- entries info -->
        

        <!-- scrollable table -->
        <div class="table-scroll shadow-sm">
          <div class="table-responsive">
            <table *ngIf="!loading() && pagedTransactions().length > 0" class="tx-table table table-borderless">
              <thead>
                <tr>
                  <th>TRANSACTION ID</th>
                  <th>DATE &amp; TIME</th>
                  <th>TYPE</th>
                  <th>REMARKS</th>
                  <th class="text-end">AMOUNT</th>
                  <th>STATUS</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let tx of pagedTransactions()">
                  <td data-label="Transaction ID">{{ tx.transactionId }}</td>
                  <td data-label="Date & Time">{{ tx.transactionDateandTime | date: 'dd MMM yyyy, HH:mm' }}</td>
                  <td data-label="Type">
                    <span class="type" [ngClass]="tx.transactiontype.toLowerCase()">{{ tx.transactiontype }}</span>
                  </td>
                  <td data-label="Remarks">{{ tx.transactionRemarks || '-' }}</td>
                  <td class="amount text-end" data-label="Amount"
                      [ngClass]="{ positive: tx.transactiontype === 'DEPOSIT', negative: tx.transactiontype === 'WITHDRAWAL' }">
                    {{ tx.transactiontype === 'DEPOSIT' ? '+' : tx.transactiontype === 'WITHDRAWAL' ? '-' : '' }}
                    {{ tx.amount | currency: 'INR' }}
                  </td>
                  <td data-label="Status">
                    <span class="status" [ngClass]="tx.transactionstatus?.toLowerCase()">{{ tx.transactionstatus }}</span>
                  </td>
                </tr>
              </tbody>
            </table>

            <div *ngIf="!loading() && pagedTransactions().length === 0" class="empty p-3 text-center">
              No recent transactions found.
            </div>
          </div>
        </div>
       
        <!-- pagination footer -->
        <div class="footer pagination">
          <div class="entries-info text-muted mb-2">
          Showing {{ firstItemIndex() }} to {{ lastItemIndex() }} of {{ filteredCount() }} entries
        </div>
        
          <div class="d-flex align-items-center gap-2">
            <button class="prev-btn btn btn-outline-secondary"
                    [disabled]="currentPage() === 1" (click)="prevPage()">Previous</button>

            <div class="pages">
              <button *ngFor="let p of totalPagesArray()"
                      [class.active]="p === currentPage()"
                      (click)="goToPage(p)">
                {{ p }}
              </button>
            </div>

            <button class="next-btn btn btn-primary"
                    [disabled]="currentPage() === totalPages()" (click)="nextPage()">Next</button>
          </div>

          <div class="rows-per-page d-flex align-items-center">
            <label class="me-2 mb-0">Rows per page:</label>
            <select class="form-select form-select-sm"
                    [ngModel]="pageSize()"
                    (ngModelChange)="changePageSize($event)">
              <option *ngFor="let opt of pageSizeOptions" [value]="opt">{{ opt }}</option>
            </select>
          </div>
        </div>

      </div>
    </div>
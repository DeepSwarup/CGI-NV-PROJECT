<div *ngIf="!isAuthenticated; else dashboardLayout">
  <!-- This router-outlet will render HomeComponent, LoginComponent, etc. -->
  <router-outlet></router-outlet>
</div>

<ng-template #dashboardLayout>
  <div class="dashboard-layout">
    <!-- Overlay for mobile when sidebar is open -->
    <div class="sidebar-overlay" [class.visible]="isSidebarVisible()" (click)="toggleSidebar()"></div>

    <!-- Vertical Sidebar with conditional class -->
    <aside class="sidebar" [class.visible]="isSidebarVisible()">
      <div class="sidebar-header">
        <i class="bi bi-bank2"></i>
        <span>BankNet</span>
      </div>
      <nav class="sidebar-nav">
        <a routerLink="/dashboard" routerLinkActive="active" (click)="isSidebarVisible.set(false)">
          <i class="bi bi-grid-1x2-fill"></i>
          <span>Overview</span>
        </a>
        <a routerLink="/accounts" routerLinkActive="active" (click)="isSidebarVisible.set(false)">
          <i class="bi bi-wallet2"></i>
          <span>Accounts</span>
        </a>
        <a routerLink="/transactions" routerLinkActive="active" (click)="isSidebarVisible.set(false)">
          <i class="bi bi-arrow-down-up"></i>
          <span>Transactions</span>
        </a>
        <a routerLink="/beneficiaries" routerLinkActive="active" (click)="isSidebarVisible.set(false)">
          <i class="bi bi-people-fill"></i>
          <span>Beneficiaries</span>
        </a>
        <a routerLink="/nominees" routerLinkActive="active" (click)="isSidebarVisible.set(false)">
          <i class="bi bi-person-badge-fill"></i>
          <span>Nominees</span>
        </a>
        <a routerLink="/profile" routerLinkActive="active" (click)="isSidebarVisible.set(false)">
          <i class="bi bi-person-circle"></i>
          <span>Profile</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content Area -->
    <div class="main-content">
      <header class="top-bar">
        <!-- Hamburger Menu Button (Mobile Only) -->
        <button class="btn hamburger-btn d-lg-none" (click)="toggleSidebar()">
          <i class="bi bi-list"></i>
        </button>
        
        <div class="user-menu ms-auto dropdown">
          <button class="btn user-avatar" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            {{ userNameInitial }}
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" routerLink="/profile">Profile</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><button class="dropdown-item" (click)="logout()">Log Out</button></li>
          </ul>
        </div>
      </header>
      
      <main class="content-area">
        <router-outlet></router-outlet>
      </main>
    </div>
  </div>
</ng-template>

